<!DOCTYPE html><html class="theme-lattice"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><title>动画：从 AE 到 Web | Aotu.io「凹凸实验室」</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="author" content="凹凸实验室"><meta name="designer" content="凹凸实验室"><meta name="rating" content="general"><meta name="format-detection" content="telephone=yes"><meta name="robots" content="index, follow"><meta baidu-gxt-verify-token="2b74a5aea155a215abea8547f929190c"><meta name="keywords" content="after effects,web,canvas,css3,animation,svg,凹凸实验室,Aotu,前端开发,全栈开发,IOS开发,Android开发"><link rel="canonical" href="https://aotu.io/notes/2018/03/06/ae2web/index.html"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png"><link rel="icon" type="image/png" sizes="48x48" href="/img/favicon-48x48.png"><link rel="manifest" href="/img/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#2f83cd"><meta name="application-name" content="Aotu.io"><link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/img/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/img/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/img/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/img/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="167x167" href="/img/apple-touch-icon-167x167.png"><link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon-180x180.png"><link rel="apple-touch-icon" sizes="1024x1024" href="/img/apple-touch-icon-1024x1024.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="Aotu.io"><meta name="msapplication-TileColor" content="#fff"><meta name="msapplication-TileImage" content="/img/mstile-144x144.png"><meta name="msapplication-config" content="/img/browserconfig.xml"><meta property="wb:webmaster" content="a1686eb81db284d5"><meta name="wechat-logo" content="https://misc.aotu.io/JChehe/2018-03-06-ae2web/wx_cover.jpg"><meta name="wechat-title" content="动画：从 AE 到 Web"><meta name="wechat-desc" content="让我们一起把『锅』扔给设计师吧！"><link rel="dns-prefetch" href="//storage.360buyimg.com"><link rel="dns-prefetch" href="//img10.360buyimg.com"><link rel="dns-prefetch" href="//img11.360buyimg.com"><link rel="dns-prefetch" href="//img12.360buyimg.com"><link rel="dns-prefetch" href="//img13.360buyimg.com"><link rel="dns-prefetch" href="//img14.360buyimg.com"><link rel="dns-prefetch" href="//img20.360buyimg.com"><link rel="dns-prefetch" href="//img30.360buyimg.com"><link rel="dns-prefetch" href="//misc.aotu.io"><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><link rel="stylesheet" href="/css/style.css"><link rel="alternate" href="/atom.xml" title="Aotu.io"><meta name="description" content="呃~貌似好久没写文章了，感觉有点奇怪。废话不多说，但还是加点前戏吧。  不想听废话，直入主题&amp;gt;&amp;gt;  前戏为何要写这篇文章 接下来因工作调整，应该就很少接触 H5 开发了。借此机会总结对动画的一些个人思考。 本文贴合实战，会结合笔者为数不多的开发案例进行讲解🤣。最后，也会提供相应文件让你实践。 为何“别人”实现的动效恰到好处？同一份设计稿给到不同开发者，结果可能千差万别。而结果主要由"><meta name="keywords" content="svg,animation,css3,canvas,web,after effects"><meta property="og:type" content="article"><meta property="og:title" content="动画：从 AE 到 Web"><meta property="og:url" content="https://aotu.io/notes/2018/03/06/ae2web/index.html"><meta property="og:site_name" content="Aotu.io"><meta property="og:description" content="呃~貌似好久没写文章了，感觉有点奇怪。废话不多说，但还是加点前戏吧。  不想听废话，直入主题&amp;gt;&amp;gt;  前戏为何要写这篇文章 接下来因工作调整，应该就很少接触 H5 开发了。借此机会总结对动画的一些个人思考。 本文贴合实战，会结合笔者为数不多的开发案例进行讲解🤣。最后，也会提供相应文件让你实践。 为何“别人”实现的动效恰到好处？同一份设计稿给到不同开发者，结果可能千差万别。而结果主要由"><meta property="og:locale" content="zh-cn"><meta property="og:image" content="http://storage.360buyimg.com/mtd/home/ae2web-31560770181612.gif"><meta property="og:image" content="http://storage.360buyimg.com/mtd/home/ae2webezgif-com-optimize1560770283267.gif"><meta property="og:image" content="https://misc.aotu.io/JChehe/2018-03-06-ae2web/ae_gui.png"><meta property="og:image" content="https://misc.aotu.io/JChehe/2018-03-06-ae2web/fps.png"><meta property="og:image" content="https://misc.aotu.io/JChehe/2018-03-06-ae2web/ae-keyframes.png"><meta property="og:image" content="https://misc.aotu.io/JChehe/2018-03-06-ae2web/timeline.png"><meta property="og:image" content="https://misc.aotu.io/JChehe/2018-03-06-ae2web/timing-function-error.png"><meta property="og:image" content="https://misc.aotu.io/JChehe/2018-03-06-ae2web/complicated-timing-function.png"><meta property="og:image" content="https://misc.aotu.io/JChehe/2018-03-06-ae2web/ae2css.png"><meta property="og:image" content="https://misc.aotu.io/JChehe/2018-03-06-ae2web/ae-timing.png"><meta property="og:image" content="https://misc.aotu.io/JChehe/2018-03-06-ae2web/css-timing.png"><meta property="og:image" content="https://misc.aotu.io/JChehe/2018-03-06-ae2web/apple_qrcode.png"><meta property="og:image" content="https://misc.aotu.io/JChehe/2018-03-06-ae2web/washer_qrcode.png"><meta property="og:updated_time" content="2020-04-28T03:04:50.299Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="动画：从 AE 到 Web"><meta name="twitter:description" content="呃~貌似好久没写文章了，感觉有点奇怪。废话不多说，但还是加点前戏吧。  不想听废话，直入主题&amp;gt;&amp;gt;  前戏为何要写这篇文章 接下来因工作调整，应该就很少接触 H5 开发了。借此机会总结对动画的一些个人思考。 本文贴合实战，会结合笔者为数不多的开发案例进行讲解🤣。最后，也会提供相应文件让你实践。 为何“别人”实现的动效恰到好处？同一份设计稿给到不同开发者，结果可能千差万别。而结果主要由"><meta name="twitter:image" content="http://storage.360buyimg.com/mtd/home/ae2web-31560770181612.gif"><meta name="twitter:site" content="o2circle"><script>var App={root:"/",isHome:!1,isCate:!1,isTag:!1}</script><script>window.WechatShareData={imgUrl:"https://misc.aotu.io/JChehe/2018-03-06-ae2web/wx_cover.jpg",link:window.location.href,title:"动画：从 AE 到 Web",desc:"让我们一起把『锅』扔给设计师吧！"},window.WechatJSSDKURL="https://aotu.jd.com/aotu-wx-api/api/wx/jssdk/signature"</script></head><body class="page-post-detail"><div class="mod-hd"><div class="grid"><div class="mod-logo"><a href="/index.html" title="Aotu.io">Aotu.io</a></div><span class="mod-hd-toggle" id="J_hdToggle"><i class="fa fa-bars"></i></span><div class="mod-hd-main"><div class="mod-hd-inner"><nav class="mod-nav"><ul class="mod-nav-list"><li class="main-nav-item"><a href="/index.html" class="main-nav-link">首页</a></li><li class="main-nav-item"><a target="_blank" href="https://geeks.aotu.io" class="main-nav-link">极客沙龙</a></li><li class="main-nav-item"><a href="https://cases.aotu.io" class="main-nav-link">H5案例</a></li><li class="main-nav-item"><a href="/about/" class="main-nav-link">关于</a></li><li class="main-nav-item"><a href="/join/" class="main-nav-link">加入我们</a></li></ul></nav><div class="mod-search" id="J_search"><a class="fa fa-search mod-search-ico" id="J_searchTrigger" title="搜索"></a><form id="J_searchForm" method="get" class="mod-search-form" action="/search/"><input type="text" name="query" class="mod-search-ipt" id="J_searchInput" placeholder="搜索"></form></div></div></div></div></div><div class="mod-container"><div class="grid"><div class="mod-main typo"><article class="post"><div class="post-cover"><img src="https://misc.aotu.io/JChehe/2018-03-06-ae2web/cover.jpg" alt="动画：从 AE 到 Web"></div><header class="post-hd"><h1 class="post-tit">动画：从 AE 到 Web</h1><div class="post-meta">by <a target="_blank" href="https://github.com/JChehe" class="post-author">J.c</a> on <span>2018-03-06</span></div><p class="post-subtit" style="display:none"><i class="fa fa-quote-left"></i>让我们一起把『锅』扔给设计师吧！</p><span style="display:none" id="busuanzi_value_page_pv"></span></header><div class="post-content"><a id="more"></a><p>呃~貌似好久没写文章了，感觉有点奇怪。废话不多说，但还是加点前戏吧。</p><blockquote><p>不想听废话，<a href="#ae2css-manual">直入主题&gt;&gt;</a></p></blockquote><h3 id="前戏" class="post-heading"><a href="#前戏" class="headerlink" title="前戏"></a>前戏<a class="post-anchor" href="#前戏" aria-hidden="true"></a></h3><p><strong>为何要写这篇文章</strong></p><p>接下来因工作调整，应该就很少接触 H5 开发了。借此机会总结对动画的一些个人思考。</p><p>本文贴合实战，会结合笔者为数不多的开发案例进行讲解🤣。最后，也会提供相应文件让你实践。</p><h3 id="为何“别人”实现的动效恰到好处？" class="post-heading"><a href="#为何“别人”实现的动效恰到好处？" class="headerlink" title="为何“别人”实现的动效恰到好处？"></a>为何“别人”实现的动效恰到好处？<a class="post-anchor" href="#为何“别人”实现的动效恰到好处？" aria-hidden="true"></a></h3><p>同一份设计稿给到不同开发者，结果可能千差万别。而结果主要由两部分体现——内在与外在。『内在』指的是代码质量、性能优化，『外在』则指的是视觉还原度和动效（交互）。</p><p>其中对于更直观的『外在』来说，视觉还原度高是前提，真正体现差距的是『动效』。因为设计师一般只给到“静态”的视觉稿，而无动画演示，更不用说提供动效搞（如 AE）了。</p><p>在这种情况下，页面的动效更多是由前端开发者自由发挥。因此对动效有钻研的同学优势尽显。他们积累了一定理论知识和经验。我也曾问过这些同学，他们大多回答是：“多试多调”。因此，在设计师无『动效稿』提供的情况下，都需要花时间慢慢调整，以达到各方（自己、设计师、产品和需求方等）满意。若没有设计、动效等相关知识的学习与积累，恐怕是一只『没头苍蝇』。</p><p>关于动画的理论方面，笔者并没有积累，但推荐一些不错的资料（或许需要梯子）。同时也希望得到读者们的有效补充：</p><ul><li>动画的十二原则——<a href="https://www.youtube.com/watch?v=uDqjIdI4bF4" target="_blank" rel="noopener">12 Principles of Animation (Official Full Series)</a></li><li>动画的第一步是『观察』——<a href="https://www.smashingmagazine.com/2017/09/animation-interaction-techniques-webgl/" target="_blank" rel="noopener">Exploring Animation And Interaction Techniques With WebGL (A Case Study)</a>，<a href="https://github.com/JChehe/blog/issues/11" target="_blank" rel="noopener">译文&gt;&gt;</a></li></ul><h3 id="其实可以把『锅』扔给设计师" class="post-heading"><a href="#其实可以把『锅』扔给设计师" class="headerlink" title="其实可以把『锅』扔给设计师"></a>其实可以把『锅』扔给设计师<a class="post-anchor" href="#其实可以把『锅』扔给设计师" aria-hidden="true"></a></h3><p>大多数前端开发者在设计和动效方面并没有太多积累，因而难以做出令人拍手称赞的效果。其实，这是设计师（或动效设计师）所擅长的领域，可从下表查看两者的对比：</p><table><thead><tr><th>*</th><th>设计师</th><th>前端开发</th><th>备注</th></tr></thead><tbody><tr><td>是否擅长动画</td><td>大部分</td><td>少部分</td><td></td></tr><tr><td>如何生产动画</td><td>GUI 工具，如 AE</td><td>编写代码</td><td></td></tr><tr><td>效益</td><td>高</td><td>低</td><td>体现在以下几个方面：<br>1. 专业度<br>2. 实现效率：可视化 &gt; 编写代码<br>3. 沟通成本<br>4. 各方满意度<br>5. …</td></tr></tbody></table><p>从上表可得，将『动效设计』交给设计师能显著提高效益。从实际工作流程上说：</p><ol><li>设计师与前端开发的排期由『线性』变为『部分重叠』：设计师交付静态视觉稿后，前端开发就能进行视觉还原，设计师此时即可进入动效设计。</li><li>设计师将动效设计导出为视频，<strong>提前取得各方满意度</strong>，避免开发期间的反复沟通修改。</li></ol><p>假设达成以上共识后，剩下的问题就是：如何还原<a name="apple"></a>『动效稿』？</p><table><thead><tr><th style="text-align:center"><img src="http://storage.360buyimg.com/mtd/home/ae2web-31560770181612.gif" alt="apple"></th><th style="text-align:center"><img src="http://storage.360buyimg.com/mtd/home/ae2webezgif-com-optimize1560770283267.gif" alt="洗衣机"></th></tr></thead><tbody><tr><td style="text-align:center">补间动画——Apple</td><td style="text-align:center">逐帧动画——洗衣机</td></tr></tbody></table><p>设计师输出的动效演示</p><blockquote><p>注：全文『动效稿』均基于 Adobe After Effects（简称 AE）设计。</p></blockquote><h3 id="AE-到-Web-实现" class="post-heading"><a href="#AE-到-Web-实现" class="headerlink" title="AE 到 Web 实现"></a><a name="ae2css-manual">AE 到 Web 实现</a><a class="post-anchor" href="#AE-到-Web-实现" aria-hidden="true"></a></h3><p>其实，与『制造业』一样，实现方式就两种：</p><ol><li>机械：通过工具直接导出</li><li>手工：手动取参数，通过掌握的 Web 技术实现</li></ol><p>两者的优缺点比较：</p><table><thead><tr><th>*</th><th>机械</th><th>手工</th></tr></thead><tbody><tr><td>效率</td><td>高</td><td>低</td></tr><tr><td>精度</td><td>高</td><td>视情况而定</td></tr><tr><td>定制化</td><td>低</td><td>高</td></tr><tr><td>情怀</td><td>无</td><td>因人而异</td></tr></tbody></table><h4 id="机械实现" class="post-heading"><a href="#机械实现" class="headerlink" title="机械实现"></a>机械实现<a class="post-anchor" href="#机械实现" aria-hidden="true"></a></h4><p>机械代表着“<strong>未来</strong>、高效”。业界出现了很多优秀的工具，使得在浏览器渲染复杂动效成为了可能，且极大地提高了效率。</p><p>代表工具有：</p><ul><li><a href="https://exchange.adobe.com/addons/products/12557#.WpunqpNuZmM" target="_blank" rel="noopener">Bodymovin</a> 是 AE 的一个插件，用于将 AE 导出为 Web 动画（HTML、SVG 或 Canvas），仅支持 AE 部分特性。</li><li><a href="https://github.com/airbnb/lottie-web" target="_blank" rel="noopener">lottie-web</a> 是 Airbnb 团队的一个用于在 Web、Android、iOS 和 React Native 渲染 AE 动画的库。</li></ul><p>可是『世界上本来就没有十全十美的东西』。机械化生产可能未必满足所有要求，生产环境上的要求就更加苛刻了。主要体现在：机械化生产导致介入难度高。若出现以下问题就难以解决：</p><ol><li>兼容性</li><li>在动画过程中插入自定义逻辑</li><li>工具自身的不完善</li><li>文件体积要求</li><li>…</li></ol><p>无论如何，『机械化』是未来，期待它以完美的姿态到来。</p><h4 id="手工实现" class="post-heading"><a href="#手工实现" class="headerlink" title="手工实现"></a>手工实现<a class="post-anchor" href="#手工实现" aria-hidden="true"></a></h4><p>手工代表着“自定义、可控性”。无论世界如何工具化，总有一些人保持着对『手工』的热情。</p><p>『手工』意味着从无到有的过程。需要我们参与这个过程的每一步。这也就使得我们拥有了很强的自定义能力。这恰恰是『机械化』目前所不具备的特性。这也是<strong>本文重点阐述的内容</strong>。</p><p>基于 AE 手工实现 Web 动画的主要工作有两个：</p><ol><li>在动效稿上拿到元素的参数信息，如 x/y/z、rotation 等</li><li>通过适当的 Web 技术进行实现，如 CSS3/Canvas/SVG 等</li></ol><h5 id="如何手工取参" class="post-heading"><a href="#如何手工取参" class="headerlink" title="如何手工取参"></a>如何手工取参<a class="post-anchor" href="#如何手工取参" aria-hidden="true"></a></h5><p>Web 动画一般分为 <strong><a href="https://baike.baidu.com/item/%E9%80%90%E5%B8%A7%E5%8A%A8%E7%94%BB" target="_blank" rel="noopener">逐帧动画</a></strong> 和 <strong><a href="https://baike.baidu.com/item/%E8%A1%A5%E9%97%B4%E5%8A%A8%E7%94%BB" target="_blank" rel="noopener">补间动画</a></strong>。</p><p>显然，对于取参操作来说，逐帧动画比补间动画的工作量要大得多，但两者操作一致。所以下面以 <a href="#apple">补间动画 Apple</a> 为例：</p><p>打开 <code>apple.aep</code> 文件，AE 界面如下：</p><p><img src="https://misc.aotu.io/JChehe/2018-03-06-ae2web/ae_gui.png" alt="AE 界面"><br>AE 界面</p><blockquote><p>点击『信息模块』预览面板的播放按钮或拖动『时间轴模块』的 <code>标记3</code> 即可预览动画。</p></blockquote><p>根据 CSS3 animation 属性，我们需要获取以下信息：</p><ol><li>动画持续时间 <code>animation-duration</code></li><li>关键帧之间的缓动函数 <code>animation-timing-function</code></li><li>动画延时时间 <code>animation-delay</code></li></ol><blockquote><p>为了方便阐述，我们选取整个 Apple 动画中一个小圆圈（共 60 个）为代表，其余元素同理。<br>另外，由于该动画是<strong>一次性</strong>的，无需设置/获取动画的重复次数（<code>animation-iteration-count</code>）、运动方向（<code>animation-direction</code>）。</p></blockquote><p>现在我们把目光投向『图层、运动模块』的 <code>标记1</code>：</p><p><img src="https://misc.aotu.io/JChehe/2018-03-06-ae2web/fps.png" alt="fps"><br>标记1——FPS</p><p>由上图可得，FPS 为 12，即 1 秒 12 帧， 1 帧 0.0833 秒。</p><p>由上面 <a href="#apple">Apple 动画</a> 可看出，每个圆的延时时间（<code>animation-delay</code>）、缓动函数（<code>animation-timing-function</code>）和持续时间（<code>animation-duration</code>）均不相同。换句话说，每个圈都是一个独立的补间动画，所有元素组合起来才是一个完整的补间动画。</p><p>双击『标记 2』，进入编组以查看每个圆的信息。</p><p><img src="https://misc.aotu.io/JChehe/2018-03-06-ae2web/ae-keyframes.png" alt="子元素——圆"><br>子元素——圆</p><p>在『查看器』或『图层、运动模块』任意选中一个圆，展开其 <code>变换</code> 属性并单击 <code>位置</code>（标记1），即可显示右侧的元素运动路径（标记2）。同时这也反映了属性的变化速率（即缓动函数（<code>animation-timing-function</code>），这方面会在后面详解。</p><blockquote><p><code>位置</code> 前面的时钟图标为蓝色时，代表有过渡动画。</p></blockquote><p><a name="ae-timeline"></a><br><img src="https://misc.aotu.io/JChehe/2018-03-06-ae2web/timeline.png" alt="某个圆的时间轴"><br>某个圆的时间轴</p><p>结合上面知识，可从上图得出以下信息点：</p><ol><li>该元素共有 4 个关键帧</li><li>只有 Y 轴上发生位移运动（绿线），X 轴上则是静止状态（红线）</li><li>延时时间为 1 帧</li><li>中间停留时间（第2、3 关键帧之间）为 1 帧</li><li>过渡时间为 42 帧（3 * 12 + 7 - 1）。<strong>注意要减去延时时间（1），因为 <code>02:03</code> 包含了它。下同。</strong></li></ol><p>因此，我们基于 CSS3 animation 实现该元素的补间动画：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"circle-29"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 默认定位在第2（或3）帧以让元素默认显示屏幕内，便于开发调试。 */</span></span><br><span class="line"><span class="selector-class">.circle-29</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(0, 224, 93, .7);</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">473px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">348px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">animation-name</span>: circle29;</span><br><span class="line">    <span class="attribute">animation-duration</span>: <span class="number">3.5s</span>; <span class="comment">/* 42 * (1 / 12) */</span></span><br><span class="line">    <span class="attribute">animation-delay</span>: <span class="number">0.0833s</span>; <span class="comment">/* 1 * (1 / 12) */</span></span><br><span class="line">    <span class="attribute">animation-fill-mode</span>: both;</span><br><span class="line">    <span class="attribute">animation-timing-function</span>: ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> circle29 &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(0, 1175px, 0);</span><br><span class="line">    &#125;</span><br><span class="line">    61<span class="selector-class">.90</span>% &#123; <span class="comment">/* (2 * 12 + 3 - 1) / 42，注意要减去延时时间（1），因为 02:03 包含了它。下同。*/</span></span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(0, 0, 0);</span><br><span class="line">    &#125;</span><br><span class="line">    64<span class="selector-class">.29</span>% &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(0, 0, 0);</span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(0, -1225px, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样就完成了某个圆的补间动画了。虽然繁琐，但是省去反复试验的时间，基本做到一次开发即可使各方满意的效果。</p><p></p><p data-height="746" data-theme-id="0" data-slug-hash="VQOxxX" data-default-tab="result" data-user="JChehe" data-embed-version="2" data-pen-title="ae2web-circle" class="codepen">See the Pen <a href="https://codepen.io/JChehe/pen/VQOxxX/" target="_blank" rel="noopener">ae2web-circle</a> by Jc (<a href="https://codepen.io/JChehe" target="_blank" rel="noopener">@JChehe</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</p><p></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><p>其余元素按照以上步骤执行即可完成整个动画。</p><p>假设没有动画演示和动效稿，<strong>仅凭借着个人感觉</strong>，编码完成一个由 60 多个元素组成的动画，简直难于上青天（对于笔者来说）。</p><h5 id="也许你对-animation-timing-function-存在误解" class="post-heading"><a href="#也许你对-animation-timing-function-存在误解" class="headerlink" title="也许你对 animation-timing-function 存在误解"></a>也许你对 <code>animation-timing-function</code> 存在误解<a class="post-anchor" href="#也许你对-animation-timing-function-存在误解" aria-hidden="true"></a></h5><p>细心的读者可能发现：如果第 1、2 帧和第 3、4 帧的缓动函数不相同时，该怎么办？</p><p>首先部分人可能对 <code>animation-timing-function</code> 存在误解：它是作用于整个 <code>@keyframes</code> 规则的。❌</p><p><img src="https://misc.aotu.io/JChehe/2018-03-06-ae2web/timing-function-error.png" alt="对 timing-function 的错误认识"></p><p>其实缓动函数是作用于 <code>@keyframes</code> 规则内的关键帧。若未为关键帧指定 <code>animation-timing-function</code>，则会从其元素取得 <code>animation-timing-function</code>。</p><p>更严格地说，缓动函数是应用在<strong>属性</strong>上，从定义该属性的关键帧到下一个指定同样属性的关键帧。若后续无指定该属性的关键帧则到动画结束。因此，在 <code>100%</code> 或 <code>to</code> 关键帧上指定 <code>animation-timing-function</code> 是无用的。</p><p>举个例子：<br></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#6190e8</span>;</span><br><span class="line">    <span class="attribute">animation</span>: move <span class="number">2s</span> ease both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> move &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">        <span class="attribute">animation-timing-function</span>: linear;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(0);</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    50% &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: .<span class="number">5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(100px);</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span></span><br><span class="line">        animation-timing-function: ease-in-out; <span class="comment">/* 无用多余 */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>在 0% 关键帧中指定的 <code>animation-timing-function: linear</code> 是对 <code>transform</code> 和 <code>opacity</code> 属性有效。但因为 50% 关键帧未指定 <code>transform</code> 属性，所以 <code>animation-timing-function: linear</code> 对它生效至有指定 <code>transform</code> 属性的关键帧，即 <strong>100%</strong>。</p><p>另外，由于 50% 关键帧未指定 <code>animation-timing-function</code>，所以它会使用 <code>.box</code> 元素上指定的 <code>ease</code> 缓动函数。</p><p>总上所述，可在关键帧上指定不同的缓动函数，以满足关键帧间属性的不同变化速率。</p><h5 id="更强大的-cubic-bezier" class="post-heading"><a href="#更强大的-cubic-bezier" class="headerlink" title="更强大的 cubic-bezier"></a>更强大的 <strong>cubic-bezier</strong><a class="post-anchor" href="#更强大的-cubic-bezier" aria-hidden="true"></a></h5><p>细心的读者可能又发现：缓动函数碰巧是 <a href="http://easings.net/zh-cn" target="_blank" rel="noopener">预定义的<strong>关键字</strong></a>，如果是以下这种情况呢？</p><p><img src="https://misc.aotu.io/JChehe/2018-03-06-ae2web/complicated-timing-function.png" alt="复杂的缓动函数"></p><p>显然浏览器<strong>预定义</strong>的关键字无法表示该类型的缓动函数，但浏览器提供了强大的 <code>cubic-bezier()</code> 方法。翻译过来就是<strong>三次贝塞尔曲线</strong>。因此，我们可以通过该方法自定义缓动函数。</p><blockquote><p>想了解贝塞尔曲线的更多知识，可阅读 <a href="http://www.html-js.com/article/1628" target="_blank" rel="noopener">《贝塞尔曲线扫盲》</a>。</p></blockquote><p><a href="#ae-timeline">AE 时间轴</a> 上呈现的是属性的变化路径，其未必与变化速率（即缓动函数）完全一致。因为它们的 X/Y 轴含义不同。</p><p><img src="https://misc.aotu.io/JChehe/2018-03-06-ae2web/ae2css.png" alt="AE 与 CSS3 animation 对比"></p><p>如上图所示，AE 是<strong>属性</strong>随着时间而变，CSS3 animation 是<strong>动画进度</strong>随着时间而变。然而<strong>属性的变化是有方向的，动画进度是永远向前的</strong>。</p><p>举个例子：</p><p>AE：<br><img src="https://misc.aotu.io/JChehe/2018-03-06-ae2web/ae-timing.png" alt="AE 的时间轴"><br>AE 属性变化是有方向的</p><p>对应 CSS3 <code>animation-timing-function</code>：<br><img src="https://misc.aotu.io/JChehe/2018-03-06-ae2web/css-timing.png" alt="CSS3 animation"><br>动画进度永远是向前的</p><p>如上面二图所示，下图是上图的速率变化（缓动函数）。理清 AE 与 CSS3 animation 的对应关系后，剩下的问题就是：如何通过 <code>cubic-bezier()</code> 表示图中的 <code>CurveA</code> 与 <code>CurveB</code>。</p><p>也许有工具可从 AE 直接导出（欢迎读者们提供链接），但本文为了简单起见，推荐使用 <a href="http://matthewlein.com/ceaser/" target="_blank" rel="noopener">Ceasar</a> 或 <a href="http://cubic-bezier.com/" target="_blank" rel="noopener">Cubic-Bezier.com</a> 这类可视化工具直接模拟生成。</p><p>因此，上述补间动画的缓动函数可表示为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">keyframes</span> ae2css &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">        <span class="attribute">animation-timing-function</span>: ease-out;</span><br><span class="line">    &#125;</span><br><span class="line">    23% &#123;</span><br><span class="line">        <span class="attribute">animation-timing-function</span>: ease-in;</span><br><span class="line">    &#125;</span><br><span class="line">    50% &#123;</span><br><span class="line">        <span class="attribute">animation-timing-function</span>: <span class="built_in">cubic-bezier</span>(0.5, 0, 0.5, 1.5);</span><br><span class="line">    &#125;</span><br><span class="line">    76% &#123;</span><br><span class="line">        <span class="attribute">animation-timing-function</span>: <span class="built_in">cubic-bezier</span>(0, 0, 0, 1);</span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="总结" class="post-heading"><a href="#总结" class="headerlink" title="总结"></a>总结<a class="post-anchor" href="#总结" aria-hidden="true"></a></h3><p>本文基于实际案例总结出 AE 到 Web 动画的实现方法。相对于『无动效稿』的反复编码尝试，该方法无疑能提高效益。当然，『手工』不能胜任复杂的动画（如 SVG 的变形动画（Morphing）），并且<strong>低效</strong>。因此，业界也在『机械/工具化』方面不断推陈出新，涌现出许多优秀的工具，让复杂的动画在各终端上得以表现。无论如何，学习更多知识总没错!</p><p>最后，感谢你的阅读！</p><h3 id="案例演示" class="post-heading"><a href="#案例演示" class="headerlink" title="案例演示"></a>案例演示<a class="post-anchor" href="#案例演示" aria-hidden="true"></a></h3><p>以下案例演示未完全按 AE 动效稿的参数。若感觉不太对劲，那也许是正常的吧!？</p><p>Apple 补间动画整体效果演示（一次性动画，请点击 “RERUN” 按钮重播）：</p><p></p><p data-height="733" data-theme-id="0" data-slug-hash="ddBZKY" data-default-tab="result" data-user="JChehe" data-embed-version="2" data-pen-title="ae2css-apple" class="codepen">See the Pen <a href="https://codepen.io/JChehe/pen/ddBZKY/" target="_blank" rel="noopener">ae2css-apple</a> by Jc (<a href="https://codepen.io/JChehe" target="_blank" rel="noopener">@JChehe</a>) on <a href="https://codepen.io" target="_blank" rel="noopener">CodePen</a>.</p><p></p><script async src="https://static.codepen.io/assets/embed/ei.js"></script><p>洗衣机逐帧动画同理（主要针对背景图的 3D 旋转进行处理）：<a href="http://jdc.jd.com/lab/2018-ae2css/washer" target="_blank" rel="noopener">链接&gt;&gt;</a></p><p>移动端体验地址：</p><table><thead><tr><th style="text-align:center"><img src="https://misc.aotu.io/JChehe/2018-03-06-ae2web/apple_qrcode.png" alt="Apple"></th><th style="text-align:center"><img src="https://misc.aotu.io/JChehe/2018-03-06-ae2web/washer_qrcode.png" alt="洗衣机"></th></tr></thead><tbody><tr><td style="text-align:center">Apple</td><td style="text-align:center">洗衣机</td></tr></tbody></table><h3 id="素材下载" class="post-heading"><a href="#素材下载" class="headerlink" title="素材下载"></a>素材下载<a class="post-anchor" href="#素材下载" aria-hidden="true"></a></h3><ul><li><a href="http://jdc.jd.com/lab/2018-ae2css/apple.zip" target="_blank" rel="noopener">Apple 补间动画 AE 文件</a></li></ul><h3 id="参考资料" class="post-heading"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料<a class="post-anchor" href="#参考资料" aria-hidden="true"></a></h3><ul><li><a href="https://medium.com/@ryan_brownhill/after-effects-to-css-79225c1d767e" target="_blank" rel="noopener">Making the transition from animating in After Effects to CSS.</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timing-function" target="_blank" rel="noopener">MDN: animation-timing-function</a></li></ul><div class="post-tags" style="display:none"><a href="/tags/svg/">svg</a> <a href="/tags/animation/">animation</a> <a href="/tags/css3/">css3</a> <a href="/tags/canvas/">canvas</a> <a href="/tags/web/">web</a> <a href="/tags/after-effects/">after effects</a></div><div class="post-categories" style="display:none"><a href="/cates/Web开发/">Web开发</a></div><div class="post-announce">感谢您的阅读，本文由 <a href="//aotu.io">凹凸实验室</a> 版权所有。如若转载，请注明出处：凹凸实验室（<a href="https://aotu.io/notes/2018/03/06/ae2web/">https://aotu.io/notes/2018/03/06/ae2web/</a>）</div><div class="post-revision"><i class="fa fa-clock-o"></i> <time class="post-updated" datetime="2020-04-28T03:04:50.299Z">上次更新：2020-04-28 11:04:50</time></div></div><div class="post-nav"><div class="post-nav-next"><a href="/notes/2018/03/22/nerv/" title="Nerv - 京东高性能前端框架">Nerv - 京东高性能前端框架 <i class="fa fa-chevron-right"></i></a></div><div class="post-nav-prev"><a href="/notes/2018/01/28/galaxian/" title="H5游戏开发：FC小蜜蜂"><i class="fa fa-chevron-left"></i> H5游戏开发：FC小蜜蜂</a></div></div><div class="post-comments" id="comments"></div><script>var gitalkOpts={id:"bm90ZXMvMjAxOC8wMy8wNi9hZTJ3ZWIv",owner:"o2team",repo:"o2team.github.io",title:"动画：从 AE 到 Web",body:"https://aotu.io/notes/2018/03/06/ae2web/index.html\n\n让我们一起把『锅』扔给设计师吧！",clientID:"3c4d153e6874260f9c7e",clientSecret:"dd44012504c6168bc05b9266e0554bb28c62ce15",admin:["JChehe"]}</script></article></div><aside class="mod-side" id="sidebar"><div class="mod-side-sec aotuwx"><img class="aotuwx-qrcode" src="/img/qrcode.jpg" alt="关注我们"><div class="aotuwx-slogan">每周推送精选技术文章</div></div><div class="mod-side-sec works"><div class="mod-side-sec-hd"><h2>服务/产品</h2></div><div class="mod-side-sec-bd"><ul class="mod-side-list"><li><a href="//taro.jd.com" target="_blank" title="Taro">Taro</a></li><li><a href="//taro-ui.jd.com" target="_blank" title="Taro-UI">Taro-UI</a></li><li><a href="//taro-ext.jd.com" target="_blank" title="Taro 物料市场">Taro 物料市场</a></li><li><a href="//taro-club.jd.com" target="_blank" title="Taro 官方论坛">Taro 官方论坛</a></li><li><a href="//cases.aotu.io/mobi/maga.html" target="_blank" title="拇指期刊">拇指期刊</a></li><li><a href="//athena.aotu.io/" target="_blank" title="Athena">Athena</a></li><li><a href="//guide.aotu.io/" target="_blank" title="前端代码规范">前端代码规范</a></li><li><a href="//halojs.aotu.io/" target="_blank" title="HaloJS">HaloJS</a></li><li><a href="//sign.aotu.io/" target="_blank" title="邮件签名工具">邮件签名工具</a></li><li><a href="//mac.aotu.io/" target="_blank" title="MAC全栈环境">MAC全栈环境</a></li><li><a href="//xcel.aotu.io" target="_blank" title="Excel Filter">Excel Filter</a></li><li><a href="//aotu.jd.com/share/" target="_blank" title="凹凸公开课">凹凸公开课</a></li><li><a href="//at.aotu.io" target="_blank" title="AT-UI">AT-UI</a></li></ul></div></div><div class="mod-side-sec favlinks"><div class="mod-side-sec-hd"><h2>友情链接</h2></div><div class="mod-side-sec-bd"><ul class="mod-side-list"><li><a href="https://www.cloudbase.net" target="_blank" title="小程序·云开发"><img style="width:22px;vertical-align:middle" src="https://img20.360buyimg.com/ling/jfs/t1/57175/5/15617/50216/5dca6729E00cdff5d/631622525425290e.png">小程序·云开发</a></li><li><a href="https://ling.jd.com" target="_blank" title="京东羚珑智能设计">羚珑智能设计</a></li><li><a href="https://jdc.jd.com" target="_blank" title="京东设计中心">JDC京东设计中心</a></li><li><a href="http://dopro.io/" target="_blank" title="腾讯 Deep Ocean">Deep Ocean</a></li><li><a href="http://fex.baidu.com" target="_blank" title="百度Web前端研发部">百度FEX</a></li><li><a href="http://taobaofed.org" target="_blank" title="淘宝前端团队">淘宝FED</a></li><li><a href="http://tgideas.qq.com" target="_blank" title="腾讯互娱设计中心">TGIdeas</a></li><li><a href="http://isux.tencent.com" target="_blank" title="腾讯SNG设计中心">ISUX</a></li><li><a href="http://cdc.tencent.com" target="_blank" title="腾讯用户研究与体验设计中心">CDC</a></li><li><a href="http://ued.ctrip.com" target="_blank" title="携程设计委员会">携程UED</a></li><li><a href="https://uiiiuiii.com/" target="_blank" title="优优教程网">优优教程网</a></li><li><a href="https://www.designup.cn/" target="_blank" title="Designup">Designup</a></li><li><a href="http://eux.baidu.com/" target="_blank" title="百度EUX">百度EUX</a></li></ul></div></div></aside></div></div><div class="mod-backtop" id="backTop"><i class="fa fa-long-arrow-up"></i></div><footer class="mod-ft" id="footer"><div class="grid"><ul class="mod-ft-links"><li><a href="/atom.xml"><i class="fa fa-rss"></i></a></li><li><a href="https://github.com/o2team/o2team.github.io" target="_blank"><i class="fa fa-github-alt"></i></a></li></ul><div class="mod-ft-sec mod-ft-copyright"><p>Designed by <a href="http://aotu.io" target="_blank">凹凸实验室</a> @<a target="_blank" href="http://jdc.jd.com">京东用户体验设计部</a></p><p>Copyright &copy; 2020. All Rights Reserved.</p><p><a href="http://www.miibeian.gov.cn/" target="_blank">粤ICP备15077732号-2</a></p></div></div></footer><script src="/js/bundle/core.js"></script><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script src="/js/post_wx_share.js"></script><script src="/js/bundle/gitalk.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?e850b980d029480b092fdd7503c3f8de";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript" src="https://tajs.qq.com/stats?sId=53685723" charset="UTF-8"></script></body></html>