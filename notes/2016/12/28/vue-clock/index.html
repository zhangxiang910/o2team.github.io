<!DOCTYPE html><html class="theme-lattice"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><title>一个栗子实践vue2.0与1.0的区别 | Aotu.io「凹凸实验室」</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="author" content="凹凸实验室"><meta name="designer" content="凹凸实验室"><meta name="rating" content="general"><meta name="format-detection" content="telephone=yes"><meta name="robots" content="index, follow"><meta baidu-gxt-verify-token="2b74a5aea155a215abea8547f929190c"><meta name="keywords" content="栗子,vue2.0与1.0的区别,vue2.0,vue,凹凸实验室,Aotu,前端开发,全栈开发,IOS开发,Android开发"><link rel="canonical" href="https://aotu.io/notes/2016/12/28/vue-clock/index.html"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png"><link rel="icon" type="image/png" sizes="48x48" href="/img/favicon-48x48.png"><link rel="manifest" href="/img/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#2f83cd"><meta name="application-name" content="Aotu.io"><link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/img/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/img/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/img/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/img/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="167x167" href="/img/apple-touch-icon-167x167.png"><link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon-180x180.png"><link rel="apple-touch-icon" sizes="1024x1024" href="/img/apple-touch-icon-1024x1024.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="Aotu.io"><meta name="msapplication-TileColor" content="#fff"><meta name="msapplication-TileImage" content="/img/mstile-144x144.png"><meta name="msapplication-config" content="/img/browserconfig.xml"><meta property="wb:webmaster" content="a1686eb81db284d5"><link rel="dns-prefetch" href="//storage.360buyimg.com"><link rel="dns-prefetch" href="//img10.360buyimg.com"><link rel="dns-prefetch" href="//img11.360buyimg.com"><link rel="dns-prefetch" href="//img12.360buyimg.com"><link rel="dns-prefetch" href="//img13.360buyimg.com"><link rel="dns-prefetch" href="//img14.360buyimg.com"><link rel="dns-prefetch" href="//img20.360buyimg.com"><link rel="dns-prefetch" href="//img30.360buyimg.com"><link rel="dns-prefetch" href="//misc.aotu.io"><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><link rel="stylesheet" href="/css/style.css"><link rel="alternate" href="/atom.xml" title="Aotu.io"><meta name="description" content="序言本文通过一个初熟的小栗子来实践2.0与1.0的不同之处，最终的效果如下图所示：  提示 可作为vue2.0+vuex入门参考 只粘贴核心代码，看源码建议直接下载demo 其实只有sass没有贴上啦 demo在移动端亲测可用  搭建项目知识点这个栗子将涉及以下知识点：  vue2.0  vue-cli脚手架 vuex状态管理库 webpack  版本声明本篇文章的版本：  node: v6.2"><meta name="keywords" content="vue,vue2.0,vue2.0与1.0的区别,栗子"><meta property="og:type" content="article"><meta property="og:title" content="一个栗子实践vue2.0与1.0的区别"><meta property="og:url" content="https://aotu.io/notes/2016/12/28/vue-clock/index.html"><meta property="og:site_name" content="Aotu.io"><meta property="og:description" content="序言本文通过一个初熟的小栗子来实践2.0与1.0的不同之处，最终的效果如下图所示：  提示 可作为vue2.0+vuex入门参考 只粘贴核心代码，看源码建议直接下载demo 其实只有sass没有贴上啦 demo在移动端亲测可用  搭建项目知识点这个栗子将涉及以下知识点：  vue2.0  vue-cli脚手架 vuex状态管理库 webpack  版本声明本篇文章的版本：  node: v6.2"><meta property="og:locale" content="zh-cn"><meta property="og:image" content="https://misc.aotu.io/yangzicheng/vue-clock/vue-clock_1.gif"><meta property="og:image" content="https://misc.aotu.io/yangzicheng/vue-clock/vue-clock_2.png"><meta property="og:image" content="https://misc.aotu.io/yangzicheng/vue-clock/vue-clock_3.png"><meta property="og:image" content="https://misc.aotu.io/yangzicheng/vue-clock/vue-clock_4.png"><meta property="og:image" content="https://misc.aotu.io/yangzicheng/vue-clock/vue-clock_5.png"><meta property="og:updated_time" content="2020-04-28T03:04:50.295Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="一个栗子实践vue2.0与1.0的区别"><meta name="twitter:description" content="序言本文通过一个初熟的小栗子来实践2.0与1.0的不同之处，最终的效果如下图所示：  提示 可作为vue2.0+vuex入门参考 只粘贴核心代码，看源码建议直接下载demo 其实只有sass没有贴上啦 demo在移动端亲测可用  搭建项目知识点这个栗子将涉及以下知识点：  vue2.0  vue-cli脚手架 vuex状态管理库 webpack  版本声明本篇文章的版本：  node: v6.2"><meta name="twitter:image" content="https://misc.aotu.io/yangzicheng/vue-clock/vue-clock_1.gif"><meta name="twitter:site" content="o2circle"><script>var App={root:"/",isHome:!1,isCate:!1,isTag:!1}</script></head><body class="page-post-detail"><div class="mod-hd"><div class="grid"><div class="mod-logo"><a href="/index.html" title="Aotu.io">Aotu.io</a></div><span class="mod-hd-toggle" id="J_hdToggle"><i class="fa fa-bars"></i></span><div class="mod-hd-main"><div class="mod-hd-inner"><nav class="mod-nav"><ul class="mod-nav-list"><li class="main-nav-item"><a href="/index.html" class="main-nav-link">首页</a></li><li class="main-nav-item"><a target="_blank" href="https://geeks.aotu.io" class="main-nav-link">极客沙龙</a></li><li class="main-nav-item"><a href="https://cases.aotu.io" class="main-nav-link">H5案例</a></li><li class="main-nav-item"><a href="/about/" class="main-nav-link">关于</a></li><li class="main-nav-item"><a href="/join/" class="main-nav-link">加入我们</a></li></ul></nav><div class="mod-search" id="J_search"><a class="fa fa-search mod-search-ico" id="J_searchTrigger" title="搜索"></a><form id="J_searchForm" method="get" class="mod-search-form" action="/search/"><input type="text" name="query" class="mod-search-ipt" id="J_searchInput" placeholder="搜索"></form></div></div></div></div></div><div class="mod-container"><div class="grid"><div class="mod-main typo"><article class="post"><div class="post-cover"><img src="//misc.aotu.io/yangzicheng/vue-clock/vue-clock_900_500.jpg" alt="一个栗子实践vue2.0与1.0的区别"></div><header class="post-hd"><h1 class="post-tit">一个栗子实践vue2.0与1.0的区别</h1><div class="post-meta">by <a target="_blank" href="https://github.com/yangzicheng" class="post-author">自成</a> on <span>2016-12-28</span></div><p class="post-subtit" style="display:none"><i class="fa fa-quote-left"></i>能用一个栗子解决的问题，都不是问题~~~</p><span style="display:none" id="busuanzi_value_page_pv"></span></header><div class="post-content"><a id="more"></a><h3 id="序言" class="post-heading"><a href="#序言" class="headerlink" title="序言"></a>序言<a class="post-anchor" href="#序言" aria-hidden="true"></a></h3><p>本文通过一个初熟的小栗子来实践2.0与1.0的不同之处，最终的效果如下图所示：</p><p><img src="//misc.aotu.io/yangzicheng/vue-clock/vue-clock_1.gif" alt></p><h3 id="提示" class="post-heading"><a href="#提示" class="headerlink" title="提示"></a>提示<a class="post-anchor" href="#提示" aria-hidden="true"></a></h3><ul><li>可作为vue2.0+vuex入门参考</li><li>只粘贴核心代码，看源码建议直接下载<a href="https://github.com/yangzicheng/vue-clock" target="_blank" rel="noopener">demo</a> <font size="2" color="#aaa">其实只有sass没有贴上啦</font></li><li>demo在移动端亲测可用</li></ul><h3 id="搭建项目" class="post-heading"><a href="#搭建项目" class="headerlink" title="搭建项目"></a>搭建项目<a class="post-anchor" href="#搭建项目" aria-hidden="true"></a></h3><h4 id="知识点" class="post-heading"><a href="#知识点" class="headerlink" title="知识点"></a>知识点<a class="post-anchor" href="#知识点" aria-hidden="true"></a></h4><p>这个栗子将涉及以下知识点：</p><ul><li>vue2.0</li><li>vue-cli脚手架</li><li>vuex状态管理库</li><li>webpack</li></ul><h4 id="版本声明" class="post-heading"><a href="#版本声明" class="headerlink" title="版本声明"></a>版本声明<a class="post-anchor" href="#版本声明" aria-hidden="true"></a></h4><p>本篇文章的版本：</p><ul><li>node: v6.2.0</li><li>vue: v2.1.0</li><li>vuex: v2.0.0</li><li>vue-router: v2.1.1</li><li>webpack: v1.13.2</li></ul><h4 id="文件目录" class="post-heading"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录<a class="post-anchor" href="#文件目录" aria-hidden="true"></a></h4><p><img src="//misc.aotu.io/yangzicheng/vue-clock/vue-clock_2.png" alt></p><h4 id="安装" class="post-heading"><a href="#安装" class="headerlink" title="安装"></a>安装<a class="post-anchor" href="#安装" aria-hidden="true"></a></h4><p>首先请确保已安装了node、npm、webpack。</p><ol><li><p>安装vue脚手架。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-cli -g</span><br></pre></td></tr></table></figure></li><li><p>选择一个目录并执行。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue init webpack 项目名字 或者vue init webpack-simple 项目名字 &lt;注意不能用中文&gt;</span><br></pre></td></tr></table></figure><p>然后根据命令行的相关提示输入信息；<br>webpack与webpack-simple两者的区别在于webpack-simple没有包括eslint等功能，普通的项目用simple就好了；<br>我使用的是前者。</p></li><li><p>进入项目目录下载相关依赖。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> 项目目录</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure></li><li><p>启动。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure></li></ol><p>这一行命令会自动启动浏览器并运行项目(如果你不想占用8080端口，可通过 项目 <code>/config/index.js</code> 中的port修改)。</p><p><img src="//misc.aotu.io/yangzicheng/vue-clock/vue-clock_3.png" alt></p><h3 id="初始化" class="post-heading"><a href="#初始化" class="headerlink" title="初始化"></a>初始化<a class="post-anchor" href="#初始化" aria-hidden="true"></a></h3><h4 id="初始化入口js文件-main-js" class="post-heading"><a href="#初始化入口js文件-main-js" class="headerlink" title="初始化入口js文件 main.js"></a>初始化入口js文件 main.js<a class="post-anchor" href="#初始化入口js文件-main-js" aria-hidden="true"></a></h4><p>main.js是应用入口文件，可以在这里</p><ul><li>配置路由vue-router</li><li>引入路由子组件</li><li>引入状态管理store(注入所有子组件)</li><li>实例化Vue</li><li>引入公共样式等</li></ul><p>已完成的main.js如下： <font size="2" color="#aaa">懒癌患者可直接拷贝</font></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"><span class="comment">//引入路由及组件</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'./components/Home'</span></span><br><span class="line"><span class="keyword">import</span> Clocklist <span class="keyword">from</span> <span class="string">'./components/Clocklist'</span></span><br><span class="line"><span class="comment">//引入公共css</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./static/css/reset.css'</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义路由</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">    &#123;</span><br><span class="line">        path : <span class="string">'/'</span>,</span><br><span class="line">        component : Home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path : <span class="string">'/home'</span>,</span><br><span class="line">        component : Home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path : <span class="string">'/clocklist'</span>,</span><br><span class="line">        component : Clocklist</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建实例</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//实例化，并将store、router挂载到根实例，从而应用到整个项目</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  store,</span><br><span class="line">  router,</span><br><span class="line">  ...App</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>)<span class="comment">//或者直接在options里声明挂载的el</span></span><br></pre></td></tr></table></figure><blockquote><p>与1.0的不同</p><ul><li><strong>映射路由：</strong>1.0是通过router的map方法映射路由，并且map接收的是一个对象，2.0中map()被替换了，通过实例化VueRouter并定义一个数组来映射路由；</li><li><strong>初始化路由：</strong>1.0通过router.start()来初始化路由，2.0中router.start()被替换了，直接通过挂载到vue根实例进行初始化</li></ul></blockquote><h4 id="初始化根组件App-vue" class="post-heading"><a href="#初始化根组件App-vue" class="headerlink" title="初始化根组件App.vue"></a>初始化根组件App.vue<a class="post-anchor" href="#初始化根组件App-vue" aria-hidden="true"></a></h4><p>在App.vue中添加路由，并引入Sidebar.vue组件，对应的样式直接写在每个独立的组件下，注意这里使用了sass语法，需在 <code>./build/webpack.base.conf.js</code> 中配置，如下所示：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vue: &#123;</span><br><span class="line">    loaders: utils.cssLoaders(&#123; <span class="attr">sourceMap</span>: useCssSourceMap &#125;),</span><br><span class="line">    postcss: [</span><br><span class="line">      <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123;</span><br><span class="line">        browsers: [<span class="string">'last 2 versions'</span>]</span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="built_in">require</span>(<span class="string">'postcss-import'</span>),</span><br><span class="line">      <span class="built_in">require</span>(<span class="string">'postcss-sass-extend'</span>),</span><br><span class="line">      <span class="built_in">require</span>(<span class="string">'postcss-simple-vars'</span>),</span><br><span class="line">      <span class="built_in">require</span>(<span class="string">'postcss-nested'</span>)<span class="comment">//sass嵌套语法，其他的看最后一个单词就知道是干什么的了</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>下面附上整个App.vue的代码，注意看注释掉的部分哦。 <font size="2" color="#aaa">从这里开始后面的sass不贴出来了</font></p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- 不加会报错 --&gt;</span></span></span><br><span class="line"><span class="xml">    </span><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_wrap"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!--S 头部 --&gt;</span></span></span><br><span class="line"><span class="xml">        </span><span class="xml"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"clock_header"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            </span><span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>计时器<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!--E 头部 --&gt;</span></span></span><br><span class="line"><span class="xml">        </span><span class="xml"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"clock_container"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="comment">&lt;!--S 导航 --&gt;</span></span></span><br><span class="line"><span class="xml">            </span><span class="xml"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"clock_nav"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                </span><span class="xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/home"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="xml">                </span><span class="xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/clocklist"</span>&gt;</span>计时列表<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="comment">&lt;!--E 导航 --&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">            <span class="comment">&lt;!--S sidebar --&gt;</span></span></span><br><span class="line"><span class="xml">            </span><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_sidebar"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                </span><span class="xml"><span class="tag">&lt;<span class="name">sidebar</span>&gt;</span><span class="tag">&lt;/<span class="name">sidebar</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="comment">&lt;!--E sidebar --&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">            <span class="comment">&lt;!--S 路由部分 --&gt;</span></span></span><br><span class="line"><span class="xml">            </span><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_router"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="comment">&lt;!-- </span></span><span class="xml"><span class="comment">&lt;transition mode="out-in"&gt; --&gt;</span></span></span><br><span class="line"><span class="xml">                </span><span class="xml"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">:name</span>=<span class="string">"transitionName"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    </span><span class="xml"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">class</span>=<span class="string">"clock_router_inner"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="comment">&lt;!--E 路由部分 --&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">import Sidebar from './components/Sidebar.vue'</span></span><br><span class="line"><span class="xml">export default </span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">    data:function()&#123;</span></span><br><span class="line"><span class="xquery">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="xquery">            transitionName: <span class="string">'slide-left'</span></span></span><br><span class="line"><span class="xquery">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;,</span></span><br><span class="line"><span class="xml">    mounted:function()</span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">        <span class="keyword">if</span>(this.<span class="variable">$route</span><span class="built_in">.name</span>==undefined)&#123;</span></span><br><span class="line"><span class="xquery">            this.<span class="variable">$router</span>.push(<span class="string">'home'</span>);</span></span><br><span class="line"><span class="xquery">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;,</span></span><br><span class="line"><span class="xml">    /*watch: </span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">      <span class="string">'$route'</span> (<span class="keyword">to</span>, from) &#123;</span></span><br><span class="line"><span class="xquery">        console.log(<span class="keyword">to</span><span class="built_in">.path</span>)</span></span><br><span class="line"><span class="xquery">      &#125;</span></span><br><span class="line"><span class="xml">    &#125;,*/</span></span><br><span class="line"><span class="xml">    components: </span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">        Sidebar</span></span><br><span class="line"><span class="xquery">    &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="xml">@import './static/sass/_function.scss';</span></span><br><span class="line"></span><br><span class="line"><span class="xml">body </span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">    overflow: hidden;</span></span><br><span class="line"><span class="xquery">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">.clock_header </span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">    height: <span class="number">42</span>px;</span></span><br><span class="line"><span class="xquery">    line-height: <span class="number">42</span>px;</span></span><br><span class="line"><span class="xquery">    background: #<span class="number">39383</span>e;</span></span><br><span class="line"><span class="xquery">    h1 &#123;</span></span><br><span class="line"><span class="xquery">        font-size: <span class="number">18</span>px;</span></span><br><span class="line"><span class="xquery">        color: #fff;</span></span><br><span class="line"><span class="xquery">        text-align: center;</span></span><br><span class="line"><span class="xquery">        &amp;::before &#123;</span></span><br><span class="line"><span class="xquery">            content: <span class="string">''</span>;</span></span><br><span class="line"><span class="xquery">            width: <span class="number">18</span>px;</span></span><br><span class="line"><span class="xquery">            height: <span class="number">18</span>px;</span></span><br><span class="line"><span class="xquery">            display: inline-block;</span></span><br><span class="line"><span class="xquery">            vertical-align: middle;</span></span><br><span class="line"><span class="xquery">            margin: -<span class="number">2</span>px <span class="number">5</span>px <span class="number">0</span> <span class="number">5</span>px;</span></span><br><span class="line"><span class="xquery">            background: url(./static/img/logo.png) no-repeat;</span></span><br><span class="line"><span class="xquery">            background-size: <span class="number">100</span>% <span class="number">100</span>%;</span></span><br><span class="line"><span class="xquery">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">.clock_nav </span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">    height: <span class="number">36</span>px;</span></span><br><span class="line"><span class="xquery">    line-height: <span class="number">36</span>px;</span></span><br><span class="line"><span class="xquery">    background: #f0eff5;</span></span><br><span class="line"><span class="xquery">    padding-left: <span class="number">5</span>px;</span></span><br><span class="line"><span class="xquery">    font-size: <span class="number">0</span>;</span></span><br><span class="line"><span class="xquery">    a &#123;</span></span><br><span class="line"><span class="xquery">        display: inline-block;</span></span><br><span class="line"><span class="xquery">        padding: <span class="number">0</span> <span class="number">10</span>px;</span></span><br><span class="line"><span class="xquery">       <span class="built_in"> position</span>: relative;</span></span><br><span class="line"><span class="xquery">        font-size: <span class="number">14</span>px;</span></span><br><span class="line"><span class="xquery">        &amp;.router-link-active &#123;</span></span><br><span class="line"><span class="xquery">            color: <span class="variable">$color_red</span>;</span></span><br><span class="line"><span class="xquery">        &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">        &amp;:not(:last-child) </span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">            &amp;::after &#123;</span></span><br><span class="line"><span class="xquery">                content: <span class="string">''</span>;</span></span><br><span class="line"><span class="xquery">                width: <span class="number">1</span>px;</span></span><br><span class="line"><span class="xquery">                background: #e1e0e6;</span></span><br><span class="line"><span class="xquery">               <span class="built_in"> position</span>: absolute;</span></span><br><span class="line"><span class="xquery">                right: <span class="number">0</span>;</span></span><br><span class="line"><span class="xquery">                top: <span class="number">12</span>px;</span></span><br><span class="line"><span class="xquery">                bottom: <span class="number">12</span>px;</span></span><br><span class="line"><span class="xquery">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">.clock_container </span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">    @extend <span class="meta">%clearfix</span>;</span></span><br><span class="line"><span class="xquery">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">.clock_sidebar </span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">    width: <span class="number">30</span>%;</span></span><br><span class="line"><span class="xquery">    float: left;</span></span><br><span class="line"><span class="xquery">    box-sizing: border-box;</span></span><br><span class="line"><span class="xquery">    border: <span class="number">1</span>px solid #ddd;</span></span><br><span class="line"><span class="xquery">    margin-top: <span class="number">10</span>px;</span></span><br><span class="line"><span class="xquery">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">.clock_router </span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">    width: <span class="number">70</span>%;</span></span><br><span class="line"><span class="xquery">    float: left;</span></span><br><span class="line"><span class="xquery">   <span class="built_in"> position</span>: relative;</span></span><br><span class="line"><span class="xquery">    &amp;_inner &#123;</span></span><br><span class="line"><span class="xquery">       <span class="built_in"> position</span>: absolute;</span></span><br><span class="line"><span class="xquery">        left: <span class="number">0</span>;</span></span><br><span class="line"><span class="xquery">        right: <span class="number">0</span>;</span></span><br><span class="line"><span class="xquery">        top: <span class="number">0</span>;</span></span><br><span class="line"><span class="xquery">        transition: all .<span class="number">3</span>s linear;</span></span><br><span class="line"><span class="xquery">    &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">.slide-left-enter</span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">  opacity: <span class="number">0</span>;</span></span><br><span class="line"><span class="xquery"> <span class="built_in"> transform</span>: translate3d(<span class="number">60</span>px, <span class="number">0</span>, <span class="number">0</span>);</span></span><br><span class="line"><span class="xquery">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">.slide-left-leave-active </span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">  opacity: <span class="number">0</span>;</span></span><br><span class="line"><span class="xquery"> <span class="built_in"> transform</span>: translate3d(-<span class="number">60</span>px, <span class="number">0</span>);</span></span><br><span class="line"><span class="xquery">&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>这里我将路由样式设置为相对定位，路由的子组件设置为绝对定位，可以解决切换路由的时候页面抖动问题。</p><blockquote><p>与1.0的不同</p><ul><li><strong>根元素：</strong>在2.0中template下需要有一个根元素（clock_wrap），否则会报错；</li><li><strong>路由导航：</strong>在1.0中我们通过v-link来指定导航链接，在2.0中可以直接使用router-link组件来导航，在浏览器中渲染后是一个a标签,并且会自动设置选中的class属性值.router-link-active， 然后通过to 属性指定链接；</li><li><strong>过渡：</strong>在1.0中通过在目标元素（router-view）使用transition与transition-mode添加过渡，在2.0中，则改成了使用transition标签包裹目标元素，可以自定义name过渡，也可以使用自带的mode添加过渡动效(如mode=”out-in”)，2.0中也支持通过$route设置基于路由的动态过渡；</li><li><strong>钩子：</strong>在1.0中的ready已经被mounted取代，此外2.0还新增了beforeMount、beforeUpdate、update等，下面是1.0与2.0生命周期示意图</li></ul></blockquote><h5 id="1-0" class="post-heading"><a href="#1-0" class="headerlink" title="1.0"></a>1.0<a class="post-anchor" href="#1-0" aria-hidden="true"></a></h5><p><img src="//misc.aotu.io/yangzicheng/vue-clock/vue-clock_4.png" alt></p><h5 id="2-0" class="post-heading"><a href="#2-0" class="headerlink" title="2.0"></a>2.0<a class="post-anchor" href="#2-0" aria-hidden="true"></a></h5><p><img src="//misc.aotu.io/yangzicheng/vue-clock/vue-clock_5.png" alt></p><h4 id="创建首页Home-vue" class="post-heading"><a href="#创建首页Home-vue" class="headerlink" title="创建首页Home.vue"></a>创建首页Home.vue<a class="post-anchor" href="#创建首页Home-vue" aria-hidden="true"></a></h4><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_time"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- &lt;div class="clock_time_inner" v-html = "time"&gt; --&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_time_inner"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">i</span>&gt;</span></span><span class="template-variable">&#123;&#123;hour&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>:<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">i</span>&gt;</span></span><span class="template-variable">&#123;&#123;minute&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>:<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">i</span>&gt;</span></span><span class="template-variable">&#123;&#123;second&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_time_btn"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">span</span> @<span class="attr">click</span> = <span class="string">'doClock'</span> <span class="attr">v-bind:id</span>=<span class="string">"clockId"</span>&gt;</span>开始计时<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    export default &#123;</span></span><br><span class="line"><span class="xml">        data() &#123;</span></span><br><span class="line"><span class="xml">            return &#123;</span></span><br><span class="line"><span class="xml">                //time: '',</span></span><br><span class="line"><span class="xml">                hour: '',</span></span><br><span class="line"><span class="xml">                minute: '',</span></span><br><span class="line"><span class="xml">                second: '',</span></span><br><span class="line"><span class="xml">                clockId: 'clock_time'</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;,</span></span><br><span class="line"><span class="xml">        mounted () &#123;</span></span><br><span class="line"><span class="xml">            this.nowTime()</span></span><br><span class="line"><span class="xml">        &#125;,</span></span><br><span class="line"><span class="xml">        methods: &#123;</span></span><br><span class="line"><span class="xml">            nowTime () &#123;</span></span><br><span class="line"><span class="xml">                const t = new Date(),</span></span><br><span class="line"><span class="xml">                    h = t.getHours(),</span></span><br><span class="line"><span class="xml">                    m = t.getMinutes(),</span></span><br><span class="line"><span class="xml">                    s = t.getSeconds()</span></span><br><span class="line"><span class="xml">                //this.$data.time =  '<span class="tag">&lt;<span class="name">i</span>&gt;</span>' + h +'<span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>:<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span>' + m +'<span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>:<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span>' + s + '<span class="tag">&lt;/<span class="name">i</span>&gt;</span>'</span></span><br><span class="line"><span class="xml">                this.$data.hour = h</span></span><br><span class="line"><span class="xml">                this.$data.minute = m</span></span><br><span class="line"><span class="xml">                this.$data.second = s</span></span><br><span class="line"></span><br><span class="line"><span class="xml">                setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="xml">                    this.nowTime()</span></span><br><span class="line"><span class="xml">                &#125;, 1000)</span></span><br><span class="line"><span class="xml">            &#125;,</span></span><br><span class="line"><span class="xml">            doClock () &#123;</span></span><br><span class="line"><span class="xml">                const nowTime = new Date()</span></span><br><span class="line"></span><br><span class="line"><span class="xml">                //状态</span></span><br><span class="line"><span class="xml">                this.$store.dispatch('changeStatus')</span></span><br><span class="line"><span class="xml">                //时长</span></span><br><span class="line"><span class="xml">                this.$store.dispatch('addDuration')</span></span><br><span class="line"><span class="xml">                //计时列表</span></span><br><span class="line"><span class="xml">                this.$store.dispatch('saveClockList', nowTime)</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>通过nowTime ()方法获取当前的时间，doClock ()分别变更状态、时长以及存储计时记录，后面会讲到vuex部分。</p><blockquote><p>与1.0的不同</p><ul><li><strong>数据绑定：</strong>与1.0一样绑定数据的形式都使用“Mustache” 语法，但2.0不能在html属性中使用了，比如栗子中的绑定id 的方法v-bind:id=”clockId”而不能直接使用<code>{{clockId}}</code>，否则会报错；</li><li><strong>真实的html：</strong>1.0中输出真实的html是使用三个大括号<code>{{{ }}}</code>，2.0之后需要使用v-html指令，如上面注释掉的部分所示；</li></ul></blockquote><h4 id="创建侧边栏Sidebar-vue" class="post-heading"><a href="#创建侧边栏Sidebar-vue" class="headerlink" title="创建侧边栏Sidebar.vue"></a>创建侧边栏Sidebar.vue<a class="post-anchor" href="#创建侧边栏Sidebar-vue" aria-hidden="true"></a></h4><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_sidebar_inner"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_sidebar_item"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"clock_sidebar_title"</span>&gt;</span>状态<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"clock_sidebar_desc"</span> <span class="attr">:class</span> = <span class="string">"&#123; 'green': status == '已计时', 'red': status == '已结束'  &#125;"</span>&gt;</span></span><span class="template-variable">&#123;&#123; status &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_sidebar_item"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"clock_sidebar_title"</span>&gt;</span>时长<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"clock_sidebar_desc"</span>&gt;</span></span><span class="template-variable">&#123;&#123; duration &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    export default &#123;</span></span><br><span class="line"><span class="xml">        computed: &#123;</span></span><br><span class="line"><span class="xml">            status() &#123;</span></span><br><span class="line"><span class="xml">                return this.$store.getters.getStatus</span></span><br><span class="line"><span class="xml">            &#125;,</span></span><br><span class="line"><span class="xml">            duration() &#123;</span></span><br><span class="line"><span class="xml">                return this.$store.getters.getDuration</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>通过计算属性computed去获取状态与时长。</p><h4 id="继续创建打卡列表Clocklist-vue" class="post-heading"><a href="#继续创建打卡列表Clocklist-vue" class="headerlink" title="继续创建打卡列表Clocklist.vue"></a>继续创建打卡列表Clocklist.vue<a class="post-anchor" href="#继续创建打卡列表Clocklist-vue" aria-hidden="true"></a></h4><figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_record"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_record_nothing"</span> <span class="attr">v-if</span> = <span class="string">"!list.length"</span>&gt;</span>没有记录<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_record_item"</span> <span class="attr">v-else</span> = <span class="string">"list.length &gt; 0"</span> <span class="attr">v-for</span> = <span class="string">"(item, index) in list"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_record_name"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span></span><span class="template-variable">&#123;&#123;index + 1&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><span class="template-variable">&#123;&#123; item.<span class="name">date</span> &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_record_desc"</span>&gt;</span>计时开始 </span><span class="template-variable">&#123;&#123; item.gotowork &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clock_record_desc"</span>&gt;</span>计时结束 </span><span class="template-variable">&#123;&#123; item.gooffwork &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    export default &#123;</span></span><br><span class="line"><span class="xml">        computed: &#123;</span></span><br><span class="line"><span class="xml">            list () &#123;</span></span><br><span class="line"><span class="xml">                return this.$store.getters.switchTime</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><blockquote><p>与1.0的不同</p><ul><li><strong>v-else-if：</strong>在2.0中新增了v-else-if，类似于js中的else if，不能单独使用，需跟在v-if之后；</li><li><strong>v-for：</strong>在使用v-for遍历对象的时候，当存在index时，1.0的参数顺序是(index, value)，2.0变成了(value, index)；</li><li><strong>v-for：</strong>1.0中，v-for块内有一个隐性的特殊变量$index可以获取当前数组的索引，在2.0中移除了，改为了以上这种显式的定义方式；</li><li><strong>key：</strong>key替代track-by</li></ul></blockquote><h4 id="vuex部分" class="post-heading"><a href="#vuex部分" class="headerlink" title="vuex部分"></a>vuex部分<a class="post-anchor" href="#vuex部分" aria-hidden="true"></a></h4><p>vuex是为vue.js设计的一个状态管理模式，主要是用来存储共享状态、实现数据通信，简单理解就是统一管理和维护各个vue组件的状态 ，它可以解决多层嵌套组件的传参、兄弟组件的状态传递等难题， 代码更结构化且容易维护。核心概念包括State、Getters、Mutations、Actions、Modules。</p><h5 id="创建index-js" class="post-heading"><a href="#创建index-js" class="headerlink" title="创建index.js"></a>创建index.js<a class="post-anchor" href="#创建index-js" aria-hidden="true"></a></h5><p>在src目录新建store文件夹用来存放共享数据(vuex)，然后新建index.js，用来初始化并导出 store。 <font size="2" color="#aaa">store已经在main.js中引入</font></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">import</span> state <span class="keyword">from</span> <span class="string">'./state'</span></span><br><span class="line"><span class="keyword">import</span> getters <span class="keyword">from</span> <span class="string">'./getters'</span></span><br><span class="line"><span class="keyword">import</span> mutations <span class="keyword">from</span> <span class="string">'./mutations'</span></span><br><span class="line"><span class="keyword">import</span> actions <span class="keyword">from</span> <span class="string">'./actions'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state,</span><br><span class="line">    getters,</span><br><span class="line">    mutations,</span><br><span class="line">    actions</span><br><span class="line">    strict: process.env.NODE_ENV !== <span class="string">'production'</span>, <span class="comment">//是否开启严格模式</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>strict为是否开启严格模式，在这种模式下任何状态变更不是由Mutation函数触发的都会报错，但是为了避免性能损失，<strong>不要在发布环境开启严格模式</strong>；<br>在构建大型应用时，store对象会变的非常臃肿，Vuex允许将store分割为模块（module）,每个模块有自己个State、Mutations、Actions、Getters。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;,</span><br><span class="line">  getters: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> moduleB = &#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    a: moduleA,</span><br><span class="line">    b: moduleB</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="创建state-js" class="post-heading"><a href="#创建state-js" class="headerlink" title="创建state.js"></a>创建state.js<a class="post-anchor" href="#创建state-js" aria-hidden="true"></a></h4><p>在store目录下继续创建state.js,代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = &#123; </span><br><span class="line">    status: <span class="string">'已结束'</span>,</span><br><span class="line">    duration: <span class="string">'0'</span>,</span><br><span class="line">    timer: <span class="literal">null</span>,</span><br><span class="line">    len: <span class="number">0</span>,</span><br><span class="line">    clockList: []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> state</span><br></pre></td></tr></table></figure><p>Vuex使用一个state包含了全部的应用层级状态–也就是一个<strong>单一状态树</strong>；<br>通常在计算属性(computed)返回(检测到数据发生变动时就会执行对相应数据有引用的函数)，如下：<br></p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  list () &#123;</span><br><span class="line">        return this.<span class="variable">$store</span>.<span class="keyword">state</span>.status</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h4 id="创建mutations-js" class="post-heading"><a href="#创建mutations-js" class="headerlink" title="创建mutations.js"></a>创建mutations.js<a class="post-anchor" href="#创建mutations-js" aria-hidden="true"></a></h4><p>在store目录下继续创建mutations.js。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> types <span class="keyword">from</span> <span class="string">'./mutation-types'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    [ types.CHANGE_STATUS ] ( state) &#123;</span><br><span class="line">        <span class="keyword">if</span>( state.status === <span class="string">'已结束'</span> ) &#123;</span><br><span class="line">            state.status = <span class="string">'已计时'</span></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(state.status === <span class="string">'已计时'</span>) &#123;</span><br><span class="line">            state.status = <span class="string">'已结束'</span></span><br><span class="line">        &#125; </span><br><span class="line">    &#125;,</span><br><span class="line">    [ types.ADD_DURATION ] ( state, obj ) &#123;</span><br><span class="line">           <span class="keyword">if</span>( state.status === <span class="string">'已计时'</span> ) &#123;</span><br><span class="line">                state.duration = obj.time</span><br><span class="line">                state.timer = obj.timer</span><br><span class="line">           &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                clearInterval(obj.timer)</span><br><span class="line">           &#125;</span><br><span class="line">           </span><br><span class="line">    &#125;,</span><br><span class="line">    [ types.SAVE_CLOCK_LIST] (state, nowTime) &#123;</span><br><span class="line">        <span class="keyword">if</span>( state.status === <span class="string">'已计时'</span> ) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(state.clockList.length)</span><br><span class="line">            state.len = state.clockList.length</span><br><span class="line">            state.clockList.push(&#123;<span class="string">"gotowork"</span>: nowTime, <span class="string">'gooffwork'</span>: <span class="string">''</span>&#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>( state.status === <span class="string">'已结束'</span> ) &#123;</span><br><span class="line">            state.clockList[state.len].gooffwork = nowTime</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>mutations是注册各种数据变化的方法，它接受state作为第一个参数，需注意以下几点</p><ul><li>变更state必须通过mutation提交，这样使得我们可以方便地跟踪每一个状态的变化</li><li>mutation 必须是同步函数，异步应在action操作</li><li>通常使用常量替代mutation事件类型,在实际操作中通常会建立一个mutation-types.js来存储mutation常量，这样的好处是可以对整个 app 包含的 mutation 一目了然</li></ul><h4 id="创建mutation-types-js" class="post-heading"><a href="#创建mutation-types-js" class="headerlink" title="创建mutation-types.js"></a>创建mutation-types.js<a class="post-anchor" href="#创建mutation-types-js" aria-hidden="true"></a></h4><p>在store目录下继续创建mutation-types.js，用来存储mutation事件名</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> CHANGE_STATUS = <span class="string">'CHANGE_STATUS'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ADD_DURATION = <span class="string">'ADD_DURATION'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SAVE_CLOCK_LIST = <span class="string">'SAVE_CLOCK_LIST'</span></span><br></pre></td></tr></table></figure><h4 id="创建actions-js" class="post-heading"><a href="#创建actions-js" class="headerlink" title="创建actions.js"></a>创建actions.js<a class="post-anchor" href="#创建actions-js" aria-hidden="true"></a></h4><p>action类似autation，与之不同的是：</p><ul><li>action不能直接变更state，而是提交mutation</li><li>action可包含异步操作，而mutation不能（严格模式下报错）</li></ul><p>Action基本语法如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  someMethod (context) &#123;</span><br><span class="line">    context.commit(<span class="string">'someMethod'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>action 函数接受一个与 store 实例具有相同方法和属性的 context 对象，因此可以调用 context.commit 提交一个 mutation，或者通过 context.state 和 context.getters 来获取 state 和 getters。<br>在实践中，通常使用 ES2015 的 参数解构简化代码，如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  someMethod (&#123; commit &#125;) &#123;</span><br><span class="line">    commit(<span class="string">'someMethod'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后附上actions.js的所有代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> types <span class="keyword">from</span> <span class="string">'./mutation-types'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    changeStatus(&#123; commit &#125;) &#123;</span><br><span class="line">        commit(types.CHANGE_STATUS)</span><br><span class="line">    &#125;,</span><br><span class="line">    addDuration(context) &#123;</span><br><span class="line">        <span class="keyword">let</span> num = <span class="number">1</span>, obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(context.state.status === <span class="string">'已计时'</span>) &#123;</span><br><span class="line">            obj.timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> h = <span class="built_in">parseInt</span>(num / <span class="number">3600</span>),</span><br><span class="line">                    m = <span class="built_in">parseInt</span>(num / <span class="number">60</span>),</span><br><span class="line">                    s = num</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span>(s &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">                        s = s % <span class="number">60</span></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span>(m &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">                        m = m % <span class="number">60</span></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                obj.time = h + <span class="string">'时'</span> + m + <span class="string">'分'</span> + s + <span class="string">'秒'</span></span><br><span class="line">                context.commit(types.ADD_DURATION, obj)</span><br><span class="line">                num ++</span><br><span class="line">            &#125;, <span class="number">1000</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            context.commit(types.ADD_DURATION, obj)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    saveClockList(&#123; commit &#125;, nowTime) &#123;</span><br><span class="line">        commit(types.SAVE_CLOCK_LIST, nowTime)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="创建getters-js" class="post-heading"><a href="#创建getters-js" class="headerlink" title="创建getters.js"></a>创建getters.js<a class="post-anchor" href="#创建getters-js" aria-hidden="true"></a></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">   getStatus:<span class="function"><span class="params">state</span> =&gt;</span> state.status,</span><br><span class="line">   getDuration:<span class="function"><span class="params">state</span> =&gt;</span> state.duration,</span><br><span class="line">   switchTime:<span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//转换前</span></span><br><span class="line">        <span class="keyword">let</span> date = <span class="string">''</span>,</span><br><span class="line">            toTime = <span class="string">''</span>,</span><br><span class="line">            offTime = <span class="string">''</span>,</span><br><span class="line">            list = []</span><br><span class="line">        <span class="comment">//转换后</span></span><br><span class="line">        <span class="keyword">let</span> switchDate = <span class="string">''</span>,</span><br><span class="line">            switchToTime = <span class="string">''</span>,</span><br><span class="line">            switchOffTime = <span class="string">''</span></span><br><span class="line"></span><br><span class="line">        state.clockList.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">v, i</span>) </span>&#123;</span><br><span class="line">            switchDate = v.gotowork.getFullYear() + <span class="string">'年'</span> + ( v.gotowork.getMonth() + <span class="number">1</span> ) + <span class="string">'月'</span> + v.gotowork.getDate()</span><br><span class="line">            switchToTime = v.gotowork.getHours() + <span class="string">':'</span> + v.gotowork.getMinutes() + <span class="string">':'</span> + v.gotowork.getSeconds()</span><br><span class="line">            <span class="keyword">if</span>(v.gooffwork !== <span class="string">''</span>) &#123;</span><br><span class="line">                switchOffTime = v.gooffwork.getHours() + <span class="string">':'</span> + v.gooffwork.getMinutes() + <span class="string">':'</span> + v.gooffwork.getSeconds()</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                switchOffTime = <span class="string">''</span></span><br><span class="line">            &#125;</span><br><span class="line">            list.push(&#123;<span class="string">'date'</span>: switchDate, <span class="string">'gotowork'</span>: switchToTime, <span class="string">'gooffwork'</span>: switchOffTime&#125;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> list</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>getter接收state作为第一个参数，我们可以通过它</p><ul><li>获取state的状态</li><li>对需要返回的数据进行处理，如过滤、转换等</li></ul><h4 id="关于代码结构" class="post-heading"><a href="#关于代码结构" class="headerlink" title="关于代码结构"></a>关于代码结构<a class="post-anchor" href="#关于代码结构" aria-hidden="true"></a></h4><p>只要遵守了vuex的规则，如何组织代码可根据项目的实际情况以及个人、团队的使用习惯，vuex并不会限制你的代码结构。所以，放开手脚一起搞事吧！</p><p>以上就是整篇文章的所有内容，如有错误，恳请指正！ <font size="2" color="#aaa">反正咱也不改</font></p><h3 id="写在最后" class="post-heading"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后<a class="post-anchor" href="#写在最后" aria-hidden="true"></a></h3><p>不得不说前端的技术更新真是快啊，从来没有哪个行业像前端这样繁荣却又令人不安。作为前端人，我们唯有保持对新技术敏锐的嗅觉与热情，才能避免被技术前进的浪潮拍在沙滩上，正所谓路漫漫其修远兮，吾将…<font size="2" color="#aaa">好了好了，搬砖去了</font>…</p><h3 id="参考资料" class="post-heading"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料<a class="post-anchor" href="#参考资料" aria-hidden="true"></a></h3><p><a href="http://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener">http://cn.vuejs.org/v2/guide/</a><br><a href="http://vuex.vuejs.org/zh-cn/getting-started.html" target="_blank" rel="noopener">http://vuex.vuejs.org/zh-cn/getting-started.html</a><br><a href="https://gold.xitu.io/post/583d1fe00ce463006baca2fa" target="_blank" rel="noopener">https://gold.xitu.io/post/583d1fe00ce463006baca2fa</a><br><a href="https://aotu.io/notes/2016/10/13/vue2/">https://aotu.io/notes/2016/10/13/vue2/</a></p><div class="post-tags" style="display:none"><a href="/tags/vue/">vue</a> <a href="/tags/vue2-0/">vue2.0</a> <a href="/tags/vue2-0与1-0的区别/">vue2.0与1.0的区别</a> <a href="/tags/栗子/">栗子</a></div><div class="post-categories" style="display:none"><a href="/cates/Web开发/">Web开发</a></div><div class="post-announce">感谢您的阅读，本文由 <a href="//aotu.io">凹凸实验室</a> 版权所有。如若转载，请注明出处：凹凸实验室（<a href="https://aotu.io/notes/2016/12/28/vue-clock/">https://aotu.io/notes/2016/12/28/vue-clock/</a>）</div><div class="post-revision"><i class="fa fa-clock-o"></i> <time class="post-updated" datetime="2020-04-28T03:04:50.295Z">上次更新：2020-04-28 11:04:50</time></div></div><div class="post-nav"><div class="post-nav-next"><a href="/notes/2017/01/04/geek-talks-s2/" title="第2季极客沙龙资料分享 - 知行·前端体验主题交流会">第2季极客沙龙资料分享 - 知行·前端体验主题交流会 <i class="fa fa-chevron-right"></i></a></div><div class="post-nav-prev"><a href="/notes/2016/12/26/jd-index-2016-summary/" title="京东2016版首页改版前端总结"><i class="fa fa-chevron-left"></i> 京东2016版首页改版前端总结</a></div></div><div class="post-comments" id="comments"></div><script>var gitalkOpts={id:"bm90ZXMvMjAxNi8xMi8yOC92dWUtY2xvY2sv",owner:"o2team",repo:"o2team.github.io",title:"一个栗子实践vue2.0与1.0的区别",body:"https://aotu.io/notes/2016/12/28/vue-clock/index.html\n\n能用一个栗子解决的问题，都不是问题~~~",clientID:"3c4d153e6874260f9c7e",clientSecret:"dd44012504c6168bc05b9266e0554bb28c62ce15",admin:["yangzicheng"]}</script></article></div><aside class="mod-side" id="sidebar"><div class="mod-side-sec aotuwx"><img class="aotuwx-qrcode" src="/img/qrcode.jpg" alt="关注我们"><div class="aotuwx-slogan">每周推送精选技术文章</div></div><div class="mod-side-sec works"><div class="mod-side-sec-hd"><h2>服务/产品</h2></div><div class="mod-side-sec-bd"><ul class="mod-side-list"><li><a href="//taro.jd.com" target="_blank" title="Taro">Taro</a></li><li><a href="//taro-ui.jd.com" target="_blank" title="Taro-UI">Taro-UI</a></li><li><a href="//taro-ext.jd.com" target="_blank" title="Taro 物料市场">Taro 物料市场</a></li><li><a href="//taro-club.jd.com" target="_blank" title="Taro 官方论坛">Taro 官方论坛</a></li><li><a href="//cases.aotu.io/mobi/maga.html" target="_blank" title="拇指期刊">拇指期刊</a></li><li><a href="//athena.aotu.io/" target="_blank" title="Athena">Athena</a></li><li><a href="//guide.aotu.io/" target="_blank" title="前端代码规范">前端代码规范</a></li><li><a href="//halojs.aotu.io/" target="_blank" title="HaloJS">HaloJS</a></li><li><a href="//sign.aotu.io/" target="_blank" title="邮件签名工具">邮件签名工具</a></li><li><a href="//mac.aotu.io/" target="_blank" title="MAC全栈环境">MAC全栈环境</a></li><li><a href="//xcel.aotu.io" target="_blank" title="Excel Filter">Excel Filter</a></li><li><a href="//aotu.jd.com/share/" target="_blank" title="凹凸公开课">凹凸公开课</a></li><li><a href="//at.aotu.io" target="_blank" title="AT-UI">AT-UI</a></li></ul></div></div><div class="mod-side-sec favlinks"><div class="mod-side-sec-hd"><h2>友情链接</h2></div><div class="mod-side-sec-bd"><ul class="mod-side-list"><li><a href="https://www.cloudbase.net" target="_blank" title="小程序·云开发"><img style="width:22px;vertical-align:middle" src="https://img20.360buyimg.com/ling/jfs/t1/57175/5/15617/50216/5dca6729E00cdff5d/631622525425290e.png">小程序·云开发</a></li><li><a href="https://ling.jd.com" target="_blank" title="京东羚珑智能设计">羚珑智能设计</a></li><li><a href="https://jdc.jd.com" target="_blank" title="京东设计中心">JDC京东设计中心</a></li><li><a href="http://dopro.io/" target="_blank" title="腾讯 Deep Ocean">Deep Ocean</a></li><li><a href="http://fex.baidu.com" target="_blank" title="百度Web前端研发部">百度FEX</a></li><li><a href="http://taobaofed.org" target="_blank" title="淘宝前端团队">淘宝FED</a></li><li><a href="http://tgideas.qq.com" target="_blank" title="腾讯互娱设计中心">TGIdeas</a></li><li><a href="http://isux.tencent.com" target="_blank" title="腾讯SNG设计中心">ISUX</a></li><li><a href="http://cdc.tencent.com" target="_blank" title="腾讯用户研究与体验设计中心">CDC</a></li><li><a href="http://ued.ctrip.com" target="_blank" title="携程设计委员会">携程UED</a></li><li><a href="https://uiiiuiii.com/" target="_blank" title="优优教程网">优优教程网</a></li><li><a href="https://www.designup.cn/" target="_blank" title="Designup">Designup</a></li><li><a href="http://eux.baidu.com/" target="_blank" title="百度EUX">百度EUX</a></li></ul></div></div></aside></div></div><div class="mod-backtop" id="backTop"><i class="fa fa-long-arrow-up"></i></div><footer class="mod-ft" id="footer"><div class="grid"><ul class="mod-ft-links"><li><a href="/atom.xml"><i class="fa fa-rss"></i></a></li><li><a href="https://github.com/o2team/o2team.github.io" target="_blank"><i class="fa fa-github-alt"></i></a></li></ul><div class="mod-ft-sec mod-ft-copyright"><p>Designed by <a href="http://aotu.io" target="_blank">凹凸实验室</a> @<a target="_blank" href="http://jdc.jd.com">京东用户体验设计部</a></p><p>Copyright &copy; 2020. All Rights Reserved.</p><p><a href="http://www.miibeian.gov.cn/" target="_blank">粤ICP备15077732号-2</a></p></div></div></footer><script src="/js/bundle/core.js"></script><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script src="/js/post_wx_share.js"></script><script src="/js/bundle/gitalk.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?e850b980d029480b092fdd7503c3f8de";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript" src="https://tajs.qq.com/stats?sId=53685723" charset="UTF-8"></script></body></html>